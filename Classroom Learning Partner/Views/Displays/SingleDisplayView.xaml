<catel:UserControl x:Class="Classroom_Learning_Partner.Views.SingleDisplayView"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:sys="clr-namespace:System;assembly=mscorlib"
                   xmlns:catel="http://catel.codeplex.com"
                   xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                   xmlns:conv="clr-namespace:Classroom_Learning_Partner.Converters"
                   xmlns:views="clr-namespace:Classroom_Learning_Partner.Views">
    <UserControl.Resources>
        <conv:ProjectedDisplayBackgroundConverter x:Key="ProjectedDisplayBackgroundConverter" />
    </UserControl.Resources>

    <Grid>
        <Grid.Style>
            <Style TargetType="Grid">
                <Setter Property="Background" Value="PaleGreen" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding MainWindowViewModel.Ribbon.IsProjectorFrozen, Source={x:Static Application.Current}}" Value="True">
                        <Setter Property="Background" Value="Transparent" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>
        <Grid HorizontalAlignment="Center"
              VerticalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Control Grid.Column="1"
                     Grid.Row="0"
                     Width="{Binding BorderWidth}">
                <Control.Resources>

                    <ControlTemplate x:Key="AnimationBarTemplate">
                        <views:AnimationPageToolBar DataContext="{Binding CurrentPage}" />
                    </ControlTemplate>

                </Control.Resources>

                <Control.Style>

                    <Style TargetType="{x:Type Control}">
                        <Style.Triggers>
                            <!--Animitation Page ToolBar-->
                            <DataTrigger Binding="{Binding CurrentPage.PageType}"
                                         Value="Animation">
                                <Setter Property="Template"
                                        Value="{StaticResource AnimationBarTemplate}" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>

                </Control.Style>
            </Control>

            <TextBlock Grid.Column="0"
                       Grid.Row="1"
                       Foreground="{StaticResource MainColor}"
                       FontWeight="Bold"
                       VerticalAlignment="Center">
                <Run Text="Page" />
                <Run Text="{Binding CurrentPage.PageNumber}" />
                <TextBlock.LayoutTransform>
                    <TransformGroup>
                        <ScaleTransform />
                        <SkewTransform />
                        <RotateTransform Angle="-90" />
                        <TranslateTransform />
                    </TransformGroup>
                </TextBlock.LayoutTransform>
            </TextBlock>

            <TextBlock Grid.Column="0"
                       Grid.Row="1"
                       Margin="0 0 0 5"
                       Text="{Binding CurrentPage.Owner.FullName}"
                       Foreground="{StaticResource MainColor}"
                       FontWeight="Bold"
                       VerticalAlignment="Bottom"
                       Visibility="{Binding MainWindowViewModel.Ribbon.InstructorVisibility, Source={x:Static Application.Current}}">
                <TextBlock.LayoutTransform>
                    <TransformGroup>
                        <ScaleTransform />
                        <SkewTransform />
                        <RotateTransform Angle="-90" />
                        <TranslateTransform />
                    </TransformGroup>
                </TextBlock.LayoutTransform>
            </TextBlock>

            <Border Grid.Column="1"
                    Grid.Row="1"
                    BorderThickness="0"
                    Width="{Binding BorderWidth}"
                    Height="{Binding BorderHeight}">
                <ScrollViewer x:Name="SingleDisplayScroller"
                              HorizontalScrollBarVisibility="Hidden"
                              VerticalScrollBarVisibility="Auto">
                    <ScrollViewer.Resources>
                        <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">25</sys:Double>
                    </ScrollViewer.Resources>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="ScrollChanged">
                            <catel:EventToCommand Command="{Binding PageScrollCommand}"
                                                  PassEventArgsToCommand="True" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Grid Width="{Binding DimensionWidth}"
                          Height="{Binding DimensionHeight}">

                        <views:CLPPageView DataContext="{Binding CurrentPage}" />

                    </Grid>
                </ScrollViewer>
            </Border>

            <Rectangle Grid.Column="1"
                       Grid.Row="1"
                       StrokeThickness="{Binding BorderThickness}"
                       Stroke="{StaticResource GrayBorderColor}"
                       Width="{Binding BorderWidth}"
                       Height="{Binding BorderHeight}" />

        </Grid>
    </Grid>
</catel:UserControl>